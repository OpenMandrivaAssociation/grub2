From 584f53546f034c0ca527d0daf54cdf8b18d2b48a Mon Sep 17 00:00:00 2001
From: Glenn Washburn <development@efficientek.com>
Date: Fri, 17 Sep 2021 23:04:00 +0000
Subject: [PATCH 047/261] tests: Change FAT volume label to be with in the
 valid character range

The ";", semi-colon, character is not a valid character for a FAT filesystem
label. This test used to succeed because prior to v4.2 of dosfstools
mkfs.vfat did not enforce the character restrictions for volume labels. So,
change the volume label string to be valid but contain symbol characters to
test odd volume labels.

Signed-off-by: Glenn Washburn <development@efficientek.com>
Reviewed-by: Daniel Kiper <daniel.kiper@oracle.com>
---
 tests/util/grub-fs-tester.in | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/tests/util/grub-fs-tester.in b/tests/util/grub-fs-tester.in
index 099228c66..ce9ae04f4 100644
--- a/tests/util/grub-fs-tester.in
+++ b/tests/util/grub-fs-tester.in
@@ -343,9 +343,10 @@ for LOGSECSIZE in $(range "$MINLOGSECSIZE" "$MAXLOGSECSIZE" 1); do
 	    # FS LIMITATION: XFS label is at most 12 UTF-8 characters
 		x"xfs"|x"xfs_crc")
 		    FSLABEL="g√©—Ç üòÅ–∫";;
-            # FS LIMITATION: FAT labels limited to 11 characters, no  international characters or lowercase
+            # FS LIMITATION: FAT labels limited to 11 characters, no international characters or lowercase
+	    # and excluding the restricted characters in "*?.,;:/\|+=<>[]"
 		x"vfat"* | xmsdos*)
-		    FSLABEL="GRUBTEST ;_";;
+		    FSLABEL="G~!@#\$%^&(_";;
 	    # FS LIMITATION: AFFS is latin1. At most 29 characters
 		x"affs" | xaffs_intl)
 		    FSLABEL="grub_tt? #*w;/e¬£@¬°¬§¬Ω¬æ{[]}<>.,";;
-- 
2.36.1

